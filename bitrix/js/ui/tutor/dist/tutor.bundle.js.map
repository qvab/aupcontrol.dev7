{"version":3,"file":"tutor.bundle.js","sources":["../src/step.js","../src/manager.js","../src/scenario.js"],"sourcesContent":["import { Type, Event } from 'main.core';\n\nexport class Step extends Event.EventEmitter\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\toptions = Type.isPlainObject(options) ? options : {};\n\n\t\tthis.id = options.id || null;\n\t\tthis.title = options.title || null;\n\t\tthis.description = options.description || null;\n\t\tthis.url = options.url || '';\n\t\tthis.isCompleted = options.isCompleted || false;\n\t\tthis.video = options.video || null;\n\t\tthis.helpLink = options.helpLink || null;\n\t\tthis.highlight = options.highlight || null;\n\t\tthis.isActive = options.isActive === true;\n\t\tthis.isShownForSlider = options.isShownForSlider || false;\n\t\tthis.initOptions = options;\n\n\t\tthis.videoObj = null;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {string}\n\t */\n\tgetTitle()\n\t{\n\t\treturn this.title;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {Object}\n\t */\n\tgetVideoObj()\n\t{\n\t\treturn this.videoObj;\n\t}\n\n\t/**\n\t * @public\n\t */\n\tgetHighlightOptions()\n\t{\n\t\treturn this.highlight;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {string}\n\t */\n\tgetDescription()\n\t{\n\t\treturn this.description;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {string}\n\t */\n\tgetUrl()\n\t{\n\t\treturn this.url;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {Boolean}\n\t */\n\tgetCompleted()\n\t{\n\t\treturn this.isCompleted;\n\t}\n\n\tgetVideo()\n\t{\n\t\treturn this.video;\n\t}\n\n\tgetHelpLink()\n\t{\n\t\treturn this.helpLink;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {string}\n\t */\n\tgetId()\n\t{\n\t\treturn this.id;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {Object}\n\t */\n\tgetInitOptions()\n\t{\n\t\treturn this.initOptions;\n\t}\n\n\t/**\n\t * @public\n\t */\n\tactivate()\n\t{\n\t\tthis.isActive = true;\n\t}\n\n\t/**\n\t * @public\n\t */\n\tgetShownForSlider()\n\t{\n\t\treturn this.isShownForSlider;\n\t}\n\n\t/**\n\t * @public\n\t */\n\tdeactivate()\n\t{\n\t\tthis.isActive = false;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tstatic getFullEventName(shortName)\n\t{\n\t\treturn \"Step:\" + shortName;\n\t}\n}","import { Dom, Event, Tag, Loc } from 'main.core';\nimport { Scenario } from './scenario';\nimport { Step } from './step';\nimport { Guide } from 'ui.tour';\nimport { Loader } from \"main.loader\";\n\nexport class Manager extends Event.EventEmitter {\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\tsetOptions(options)\n\t{\n\t\toptions = options || {};\n\n\t\tthis.tutorialData = options.tutorialData || {};\n\t\tthis.eventService = options.eventService || {};\n\t\tthis.lastCheckTime = options.lastCheckTime || 0;\n\t\tthis.domain = options.domain || '';\n\t}\n\n\tgetDomain()\n\t{\n\t\treturn this.domain;\n\t}\n\n\tgetCurrentTutorialData()\n\t{\n\t\treturn this.tutorialData;\n\t}\n\n\tgetCurrentEventService()\n\t{\n\t\treturn this.eventService;\n\t}\n\n\tgetCurrentLastCheckTime()\n\t{\n\t\treturn this.lastCheckTime;\n\t}\n\n\t/**\n\t * @return {Manager}\n\t */\n\tstatic getInstance()\n\t{\n\t\treturn this.instance;\n\t}\n\n\t/**\n\t * @return {Scenario}\n\t */\n\tstatic getScenarioInstance()\n\t{\n\t\treturn this.scenarioInstance;\n\t}\n\n\tstatic init(options)\n\t{\n\t\tlet instance = this.getInstance();\n\t\tif (!(instance instanceof Manager))\n\t\t{\n\t\t\tthis.instance = new Manager();\n\t\t\tinstance = this.getInstance();\n\t\t\tlet eventName = 'bx.ui.tutor.manager.init';\n\t\t\tEvent.EventEmitter.emit(eventName);\n\t\t\t//compatibility\n\t\t\tBX.onCustomEvent(eventName);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tinstance = this.getInstance();\n\t\t}\n\t\tinstance.setOptions(options);\n\n\t\treturn instance;\n\t}\n\n\tstatic initScenario(options)\n\t{\n\t\tlet instance = this.getScenarioInstance();\n\t\tif (!(instance instanceof Scenario))\n\t\t{\n\t\t\tthis.scenarioInstance = new Scenario();\n\t\t\tinstance = this.getScenarioInstance();\n\t\t\tlet eventName = 'bx.ui.tutor.manager.scenario.init';\n\t\t\tEvent.EventEmitter.emit(eventName);\n\t\t\t//compatibility\n\t\t\tBX.onCustomEvent(eventName);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tinstance = this.getScenarioInstance();\n\t\t}\n\t\tinstance.setOptions(options);\n\n\t\treturn instance;\n\t}\n\n\tstatic showButton(animation)\n\t{\n\t\treturn this.getImButton(animation);\n\t}\n\n\tstatic getRootImButton()\n\t{\n\t\treturn document.getElementById('ui-tutor-btn-wrap');\n\t}\n\n\tstatic hasImButton()\n\t{\n\t\treturn !!this.getRootImButton();\n\t}\n\n\tstatic getImButton(animation)\n\t{\n\t\tif(!this.layout.imButton)\n\t\t{\n\t\t\tlet buttonWrapper = this.getRootImButton();\n\t\t\tif(buttonWrapper)\n\t\t\t{\n\t\t\t\tlet buttonInner = Tag.render`\n\t\t\t\t\t<div class=\"ui-tutor-btn\"></div>\n\t\t\t\t`;\n\t\t\t\tif (animation)\n\t\t\t\t{\n\t\t\t\t\tDom.addClass(buttonWrapper, 'ui-tutor-btn-wrap-animate');\n\t\t\t\t}\n\t\t\t\tDom.append(buttonInner, buttonWrapper);\n\t\t\t\tDom.addClass(buttonWrapper, 'ui-tutor-btn-wrap-show');\n\t\t\t\tthis.layout.imButton = buttonWrapper;\n\t\t\t\tEvent.bind(this.layout.imButton, \"click\", () => {\n\t\t\t\t\tthis.emit(this.getFullEventName('clickImButton'));\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn this.layout.imButton;\n\t}\n\n\tstatic showSmallPopup(text)\n\t{\n\t\tthis.smallPopupText = text;\n\t\tthis.getSmallPopup().style.display = 'block';\n\t\tthis.smallPopupText = '';\n\n\t\tif (Dom.hasClass(this.getSmallPopup(), 'ui-tutor-popup-welcome-hide'))\n\t\t{\n\t\t\tDom.removeClass(this.getSmallPopup(), 'ui-tutor-popup-welcome-hide');\n\t\t}\n\t}\n\n\tstatic hideSmallPopup()\n\t{\n\t\tDom.removeClass(this.getSmallPopup(), 'ui-tutor-popup-welcome-show');\n\t\tDom.addClass(this.getSmallPopup(), 'ui-tutor-popup-welcome-hide');\n\n\t\tsetTimeout(function() {\n\t\t\tDom.remove(this.getSmallPopup());\n\t\t\tthis.fireEvent('onCompleteHideWelcomePopup');\n\t\t}.bind(this), 300);\n\t}\n\n\tstatic showWelcomePopup(text)\n\t{\n\t\tthis.fireEvent('onShowWelcomePopup');\n\t\tthis.showSmallPopup(text);\n\t}\n\n\tstatic hideWelcomePopup()\n\t{\n\t\tthis.fireEvent('onBeforeHideWelcomePopup');\n\t\tthis.hideSmallPopup();\n\t\tthis.fireEvent('onAfterHideWelcomePopup');\n\t}\n\n\tstatic showNoticePopup(text)\n\t{\n\t\tthis.fireEvent('onShowNoticePopup');\n\t\tthis.showSmallPopup(text);\n\t}\n\n\tstatic hideNoticePopup()\n\t{\n\t\tthis.fireEvent('onBeforeHideNoticePopup');\n\t\tthis.hideSmallPopup();\n\t\tthis.fireEvent('onAfterHideNoticePopup');\n\t}\n\n\tstatic getSmallPopup()\n\t{\n\t\tconst clickWelcomePopupHandler = () => {\n\t\t\tthis.emit(this.getFullEventName('onClickWelcomePopupBtn'));\n\t\t};\n\n\t\tif (!this.smallPopup)\n\t\t{\n\t\t\tthis.smallPopup =\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"ui-tutor-popup\" onclick=\"${clickWelcomePopupHandler.bind(this)}\">\n\t\t\t\t\t\t<div class=\"ui-tutor-popup-header\">\n\t\t\t\t\t\t\t<span class=\"ui-tutor-popup-header-icon\"></span>\n\t\t\t\t\t\t\t<span class=\"ui-tutor-popup-header-title-wrap\">\n\t\t\t\t\t\t\t\t<span class=\"ui-tutor-popup-header-title\">${Loc.getMessage('JS_UI_TUTOR_TITLE')}</span> \n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"ui-tutor-popup-content\">\n\t\t\t\t\t\t\t<div class=\"ui-tutor-popup-text\">${this.smallPopupText}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"ui-tutor-popup-icon-angle\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t\tthis.fireEvent('onCreateWelcomePopupNode');\n\t\t\tDom.addClass(this.smallPopup, 'ui-tutor-popup-welcome-show');\n\t\t\tthis.fireEvent('onBeforeAppendWelcomePopupNode');\n\t\t\tDom.append(this.smallPopup, document.body);\n\t\t\tthis.fireEvent('onAfterAppendWelcomePopupNode');\n\t\t}\n\n\t\treturn this.smallPopup;\n\t}\n\n\tstatic showStartPopup(title, text)\n\t{\n\t\tthis.fireEvent('onShowStartPopup');\n\t\tif (window.event && this.smallPopup)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.startTitle = title;\n\t\tthis.startText = text;\n\t\tDom.addClass(this.getStartPopup(), 'ui-tutor-popup-show');\n\t\tDom.remove(this.getSmallPopup());\n\t\tthis.startPopup.style.display = 'flex';\n\t\tthis.startTitle = '';\n\t\tthis.startText = '';\n\t};\n\n\tstatic closeStartPopup()\n\t{\n\t\tDom.remove(this.getStartPopup());\n\t\tdelete this.startPopup;\n\t}\n\n\tstatic getStartPopup()\n\t{\n\t\tif (!this.startPopup)\n\t\t{\n\t\t\tthis.startPopup =\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"ui-tutor-popup ui-tutor-popup-start\">\n\t\t\t\t\t\t<div class=\"ui-tutor-popup-header\">\n\t\t\t\t\t\t\t<span class=\"ui-tutor-popup-header-icon\"></span>\n\t\t\t\t\t\t\t<span class=\"ui-tutor-popup-header-title-wrap\">\n\t\t\t\t\t\t\t\t<span class=\"ui-tutor-popup-header-title\">${Loc.getMessage('JS_UI_TUTOR_TITLE')}</span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"ui-tutor-popup-content\">\n\t\t\t\t\t\t\t<div class=\"ui-tutor-popup-title\">${this.startTitle}</div>\n\t\t\t\t\t\t\t<div class=\"ui-tutor-popup-text\">${this.startText}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"ui-tutor-popup-footer\">\n\t\t\t\t\t\t\t<div class=\"ui-tutor-popup-btn\">\n\t\t\t\t\t\t\t\t${this.getBeginBtn()}\n\t\t\t\t\t\t\t\t${this.getDeferBtn()}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"ui-tutor-popup-icon-angle\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t\tthis.fireEvent('onCreateStartPopupNode');\n\t\t\tDom.append(this.startPopup, document.body);\n\t\t\tthis.fireEvent('onAfterAppendStartPopupNode');\n\t\t}\n\n\t\treturn this.startPopup;\n\t}\n\n\tstatic getBeginBtn()\n\t{\n\t\tif (!this.beginBtn)\n\t\t{\n\t\t\tthis.beginBtn =\n\t\t\t\tTag.render`\n\t\t\t\t\t<button class=\"ui-btn ui-btn-primary ui-btn-round\">\n\t\t\t\t\t\t${Loc.getMessage('JS_UI_TUTOR_BTN_BEGIN')}\n\t\t\t\t\t</button>\n\t\t\t\t`;\n\n\t\t\tEvent.bind(this.beginBtn, \"click\", ()=> {\n\t\t\t\tthis.fireEvent('clickBeginBtn');\n\t\t\t});\n\t\t}\n\n\t\treturn this.beginBtn;\n\t}\n\n\tstatic getDeferBtn()\n\t{\n\t\tif (!this.deferBtn)\n\t\t{\n\t\t\tthis.deferBtn =\n\t\t\t\tTag.render`\n\t\t\t\t\t<button class=\"ui-btn ui-btn-link\">\n\t\t\t\t\t\t${Loc.getMessage('JS_UI_TUTOR_CLOSE_POPUP_BTN')}\n\t\t\t\t\t</button>\n\t\t\t\t`;\n\n\t\t\tEvent.bind(this.deferBtn, \"click\", () => {\n\t\t\t\tthis.fireEvent('clickDeferBtn');\n\t\t\t});\n\t\t}\n\n\t\treturn this.deferBtn;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tstatic getFullEventName(shortName)\n\t{\n\t\treturn \"UI.Tutor.Manager:\" + shortName;\n\t}\n\n\t/**\n\t * @public\n\t */\n\tstatic getInformer()\n\t{\n\t\tif (!this.informer)\n\t\t{\n\t\t\tthis.informer =\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"ui-tutor-informer\" id=\"ui-tutor-informer\"></div>\n\t\t\t\t`;\n\t\t\tlet informerParentNode = this.getImButton();\n\t\t\tif(this.isCollapsedShow)\n\t\t\t{\n\t\t\t\tinformerParentNode = this.getCollapseBlock();\n\t\t\t}\n\t\t\tif(informerParentNode)\n\t\t\t{\n\t\t\t\tDom.append(this.informer, informerParentNode);\n\t\t\t}\n\t\t}\n\n\t\treturn this.informer;\n\t}\n\n\tstatic setCount(num)\n\t{\n\t\tthis.fireEvent('onBeforeSetCount');\n\t\tif (num < 1)\n\t\t{\n\t\t\tthis.removeInformer();\n\t\t\tdelete this.informer;\n\t\t\tthis.isInformerShow = false;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.getInformer().textContent = num;\n\t\t\tthis.isInformerShow = true;\n\t\t}\n\t\tthis.fireEvent('onAfterSetCount');\n\t}\n\n\t/**\n\t * @private\n\t */\n\tstatic removeInformer()\n\t{\n\t\tif(this.isInformerShow)\n\t\t{\n\t\t\tDom.remove(this.getInformer());\n\t\t}\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tstatic showCollapsedBlock(step, withGuide, showAfterAnimation)\n\t{\n\t\twithGuide = withGuide !== false;\n\t\tshowAfterAnimation = showAfterAnimation !== false;\n\t\tthis.fireEvent('onBeforeShowCollapsedBlock');\n\t\tif(!this.isCollapsedShow)\n\t\t{\n\t\t\tthis.fireEvent('onStartShowCollapsedBlock');\n\t\t\tif(!(step instanceof Step))\n\t\t\t{\n\t\t\t\tstep = new Step(step);\n\t\t\t}\n\t\t\tthis.collapsedStep = step;\n\n\t\t\tlet collapsedBlock = this.getCollapseBlock();\n\t\t\tlet showFunction = function() {\n\t\t\t\tcollapsedBlock.style.display = 'flex';\n\t\t\t};\n\t\t\tif(showAfterAnimation)\n\t\t\t{\n\t\t\t\tsetTimeout(showFunction.bind(this), 300);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tshowFunction.call(this);\n\t\t\t}\n\t\t\tthis.getCollapseTitle().innerHTML = step.getTitle();\n\t\t\tif(this.isInformerShow)\n\t\t\t{\n\t\t\t\tDom.append(this.getInformer(), collapsedBlock);\n\t\t\t}\n\t\t\tthis.isCollapsedShow = true;\n\t\t\tthis.fireEvent('onShowCollapsedBlock');\n\t\t}\n\n\t\tif (withGuide)\n\t\t{\n\t\t\tthis.showGuide();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.checkButtonsState();\n\t\t}\n\t}\n\n\tstatic setCollapsedInvisible()\n\t{\n\t\tthis.hideNode(this.getCollapseBlock());\n\t}\n\n\tstatic setCollapsedVisible()\n\t{\n\t\tthis.showNode(this.getCollapseBlock());\n\t}\n\n\tstatic checkButtonsState()\n\t{\n\t\tthis.fireEvent('onCheckButtonsState');\n\t\tlet step = this.collapsedStep;\n\t\tif(!step)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif(step.getCompleted())\n\t\t{\n\t\t\tif(this.activeGuide)\n\t\t\t{\n\t\t\t\tthis.hideNode(this.getRepeatBtn());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.showNode(this.getRepeatBtn());\n\t\t\t}\n\t\t\tthis.hideNode(this.getCompletedBtn());\n\t\t\tthis.hideNode(this.getStartBtn());\n\t\t}\n\t\telse if(step.isActive)\n\t\t{\n\t\t\tthis.showNode(this.getCompletedBtn());\n\t\t\tif(this.activeGuide || !this.isShowRepeatWithCompleted)\n\t\t\t{\n\t\t\t\tthis.hideNode(this.getRepeatBtn());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.showNode(this.getRepeatBtn());\n\t\t\t}\n\t\t\tthis.hideNode(this.getStartBtn());\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.showNode(this.getStartBtn());\n\t\t\tthis.hideNode(this.getRepeatBtn());\n\t\t\tthis.hideNode(this.getCompletedBtn());\n\t\t}\n\t}\n\n\tstatic showGuide()\n\t{\n\t\tthis.fireEvent('onBeforeShowGuide');\n\t\tlet step = this.collapsedStep;\n\t\tif (!this.activeGuide && step)\n\t\t{\n\t\t\tthis.fireEvent('onStartShowGuide');\n\t\t\tthis.activeGuide = new Guide({\n\t\t\t\tsimpleMode: true,\n\t\t\t\tsteps: [\n\t\t\t\t\tstep.getHighlightOptions()\n\t\t\t\t],\n\t\t\t});\n\t\t\tthis.activeGuide.subscribe(Guide.getFullEventName(\"onFinish\"), this.finishGuide.bind(this));\n\t\t\tthis.activeGuide.start();\n\t\t\tDom.remove(this.activeGuide.getPopup().closeIcon);\n\t\t\tthis.fireEvent('showCollapseWithGuide');\n\t\t\tthis.checkButtonsState();\n\t\t}\n\t}\n\n\tstatic closeGuide()\n\t{\n\t\tif(this.activeGuide instanceof Guide)\n\t\t{\n\t\t\tthis.activeGuide.close();\n\t\t\tthis.fireEvent('onAfterGuide');\n\t\t}\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tstatic getCollapseBlock()\n\t{\n\t\tif (!this.layout.collapseBlock)\n\t\t{\n\t\t\tthis.layout.collapseBlock =\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"ui-tutor-popup ui-tutor-popup-collapse\" onclick=\"${this.clickCollapseBlockHandler.bind(this)}\">\n\t\t\t\t\t\t<div class=\"ui-tutor-popup-content\">\n\t\t\t\t\t\t\t<div class=\"ui-tutor-popup-step-subject\">${Loc.getMessage('JS_UI_TUTOR_STEP_TITLE')}</div>\n\t\t\t\t\t\t\t${this.getCollapseTitle()}\n\t\t\t\t\t\t\t<div class=\"ui-tutor-popup-collapse-btn\">\n\t\t\t\t\t\t\t\t${this.getStartBtn()}\n\t\t\t\t\t\t\t\t${this.getRepeatBtn()}\n\t\t\t\t\t\t\t\t${this.getCompletedBtn()}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t\tthis.fireEvent('onCreateCollapsedBlockNode');\n\t\t\tDom.append(this.layout.collapseBlock, document.body);\n\t\t\tthis.fireEvent('onAfterAppendCollapsedBlockNode');\n\t\t}\n\n\t\treturn this.layout.collapseBlock;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tstatic getStartBtn()\n\t{\n\t\tif (!this.startBtn)\n\t\t{\n\t\t\tthis.startBtn =\n\t\t\t\tTag.render`\n\t\t\t\t\t<button class=\"ui-btn ui-btn-primary ui-btn-round ui-btn-xs\">\n\t\t\t\t\t\t${Loc.getMessage('JS_UI_TUTOR_BTN_START')}\n\t\t\t\t\t</button>\n\t\t\t\t`;\n\n\t\t\tEvent.bind(this.startBtn, \"click\", (event) => {\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tthis.fireEvent('clickStartBtn');\n\t\t\t});\n\t\t}\n\n\t\treturn this.startBtn;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tstatic getRepeatBtn()\n\t{\n\t\tif (!this.repeatBtn)\n\t\t{\n\t\t\tthis.repeatBtn =\n\t\t\t\tTag.render`\n\t\t\t\t\t<button class=\"ui-btn ui-btn-primary ui-btn-round ui-btn-xs\">\n\t\t\t\t\t\t${Loc.getMessage('JS_UI_TUTOR_BTN_REPEAT')}\n\t\t\t\t\t</button>\n\t\t\t\t`;\n\n\t\t\tEvent.bind(this.repeatBtn, \"click\", (event) => {\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tthis.fireEvent('clickRepeatBtn');\n\t\t\t});\n\t\t}\n\n\t\treturn this.repeatBtn;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tstatic getCompletedBtn()\n\t{\n\t\tif (!this.completedBtn)\n\t\t{\n\t\t\tthis.completedBtn =\n\t\t\t\tTag.render`\n\t\t\t\t\t<button class=\"ui-btn ui-btn-success ui-btn-round ui-btn-xs\">\n\t\t\t\t\t\t${Loc.getMessage('JS_UI_TUTOR_BTN_COMPLETED_SHORT')}\n\t\t\t\t\t</button>\n\t\t\t\t`;\n\n\t\t\tEvent.bind(this.completedBtn, \"click\", (event) => {\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tthis.fireEvent('clickCompletedBtn');\n\t\t\t});\n\t\t}\n\n\t\treturn this.completedBtn;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tstatic getCollapseTitle()\n\t{\n\t\tif (!this.layout.collapseTitle)\n\t\t{\n\t\t\tthis.layout.collapseTitle =\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"ui-tutor-popup-step-title\"></div>\n\t\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.collapseTitle;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tstatic closeCollapsePopup(event)\n\t{\n\t\tthis.closeCollapseEntity();\n\t\tthis.fireEvent('clickCloseCollapseBlock');\n\t}\n\n\t/**\n\t * @private\n\t */\n\tstatic clickCollapseBlockHandler()\n\t{\n\t\tthis.fireEvent('clickCollapseBlock');\n\t}\n\n\tstatic finishGuide()\n\t{\n\t\tdelete this.activeGuide;\n\t\tthis.checkButtonsState();\n\t\tthis.fireEvent('completeCloseGuide');\n\t}\n\n\tstatic closeCollapseEntity()\n\t{\n\t\tthis.fireEvent('onBeforeHideCollapsedBlock');\n\t\tthis.getCollapseBlock().style.display = 'none';\n\t\tthis.getImButton().style.display = 'block';\n\t\tif(this.activeGuide instanceof Guide)\n\t\t{\n\t\t\tthis.activeGuide.close();\n\t\t}\n\t\tif(this.isInformerShow)\n\t\t{\n\t\t\tDom.append(this.getInformer(), this.getImButton());\n\t\t}\n\t\tdelete this.collapsedStep;\n\t\tthis.isCollapsedShow = false;\n\t\tthis.fireEvent('onHideCollapsedBlock');\n\t}\n\n\tstatic showLoader()\n\t{\n\t\tthis.fireEvent('onBeforeShowLoader');\n\t\tthis.startTitle = '';\n\t\tthis.startText = '';\n\t\tthis.layout.loader = new Loader({\n\t\t\ttarget: this.getStartPopup(),\n\t\t\tsize: 85\n\t\t});\n\t\tthis.layout.loader.show();\n\t\tthis.getStartPopup().style.display = 'flex';\n\t\tDom.addClass(this.getStartPopup(), \"ui-tutor-popup-load\");\n\t\tthis.fireEvent('onAfterShowLoader');\n\t}\n\n\tstatic hideLoader()\n\t{\n\t\tif (this.layout.loader)\n\t\t{\n\t\t\tthis.layout.loader.destroy();\n\t\t\tthis.getStartPopup().style.display = 'none';\n\t\t}\n\t}\n\n\tstatic showCollapsedLoader()\n\t{\n\t\tthis.fireEvent('onBeforeShowCollapsedLoader');\n\t\tthis.layout.collapseLoader = new Loader({\n\t\t\ttarget: this.getCollapseBlock(),\n\t\t\tsize: 34\n\t\t});\n\t\tthis.layout.collapseLoader.show();\n\t\tthis.getCollapseBlock().style.display = 'flex';\n\t\tDom.addClass(this.getCollapseBlock(), \"ui-tutor-popup-collapse-load\");\n\t\tthis.fireEvent('onAfterShowCollapsedLoader');\n\t}\n\n\tstatic hideCollapsedLoader()\n\t{\n\t\tthis.fireEvent('onBeforeHideCollapsedLoader');\n\t\tif (this.layout.collapseLoader)\n\t\t{\n\t\t\tthis.layout.collapseLoader.destroy();\n\t\t\tDom.removeClass(this.getCollapseBlock(), \"ui-tutor-popup-collapse-load\");\n\t\t\tthis.getCollapseBlock().style.display = 'none';\n\t\t}\n\t\tthis.fireEvent('onAfterHideCollapsedLoader');\n\t}\n\n\tstatic showNode (node)\n\t{\n\t\tnode.style.display = 'block';\n\t}\n\n\tstatic hideNode (node)\n\t{\n\t\tnode.style.display = 'none';\n\t}\n\n\tstatic checkFollowLink(step, scenario)\n\t{\n\t\tthis.fireEvent('onStartCheckFollowLink');\n\t\tstep = step || this.collapsedStep;\n\t\tif(step instanceof Step)\n\t\t{\n\t\t\tscenario = scenario || {};\n\t\t\tif (!(window.location.pathname === step.getUrl()))\n\t\t\t{\n\t\t\t\tlet beforeEvent = 'onBeforeRedirectToActionPage';\n\t\t\t\tif(scenario instanceof Scenario)\n\t\t\t\t{\n\t\t\t\t\tDom.addClass(scenario.getStartBtn(), 'ui-btn-wait');\n\t\t\t\t\tscenario.fireCurrentStepEvent(beforeEvent);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tDom.addClass(this.getStartBtn(), 'ui-btn-wait');\n\t\t\t\t\tthis.emit(beforeEvent, {step});\n\t\t\t\t}\n\t\t\t\twindow.location = step.getUrl();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif(scenario instanceof Scenario)\n\t\t\t\t{\n\t\t\t\t\tscenario.showCollapseBlock(step);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tstep.activate();\n\t\t\t\t\tthis.showCollapsedBlock(step);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.fireEvent('onFinishCheckFollowLink');\n\t}\n\n\tstatic fireEvent(eventName)\n\t{\n\t\tthis.emit(this.getFullEventName(eventName));\n\t}\n}\n\n/**\n * @private\n */\nManager.instance = null;\nManager.scenarioInstance = null;\nManager.activeGuide = null;\nManager.isShowRepeatWithCompleted = true;\nManager.layout = {\n\timButton: null,\n\tcollapseBlock: null,\n\tcollapseTitle: null,\n};","import { Type, Dom, Event, Tag, Loc } from 'main.core';\nimport {Step} from './step.js';\nimport {Manager} from './manager.js';\n\nexport class Scenario extends Event.EventEmitter {\n\tconstructor(options = {}) {\n\t\tsuper(options);\n\n\t\tthis.stepPopup = null;\n\t\tthis.arrowTimer = null;\n\t\tthis.guide = null;\n\t\tthis.loader = null;\n\n\t\tthis.arrowWrap = null;\n\t\tthis.prevArrow = null;\n\t\tthis.nextArrow = null;\n\n\t\tthis.currentStepIndex = 0;\n\t\tthis.currentStep = null;\n\t\tthis.isAddedSteps = false;\n\t\tthis.hasArrows = false;\n\n\t\tthis.isLoading = true;\n\n\t\tthis.setOptions(options);\n\n\t\tthis.btn = document.getElementById('ui-tutor-btn-wrap');\n\t\tthis.informer = document.getElementById('ui-tutor-informer');\n\n\t\tthis.layout = {\n\t\t\tstepBlock: null,\n\t\t\tprogress: null,\n\t\t\tcounter: null,\n\t\t\tcounterContainer: null,\n\t\t\ttitle: null,\n\t\t\tdescription: null,\n\t\t\tcollapseBlock: null,\n\t\t\tcollapseTitle: null,\n\t\t\tcollapseDescription: null,\n\t\t\tcontent: null,\n\t\t\tcontentInner: null,\n\t\t\tcontentBlock: null,\n\t\t\turl: null,\n\t\t\ttarget: null,\n\t\t\tstartBtn: null,\n\t\t\tnextBtn: null,\n\t\t\trepeatBtn: null,\n\t\t\tdeferBtn: null,\n\t\t\thelp: null,\n\t\t\tcompletedBtn: null,\n\t\t\tcompletedBlock: null,\n\t\t\tfinishedBlock: null,\n\t\t\tsupportLink: null\n\t\t};\n\n\t\tthis.sections = [\n\t\t\t'settings',\n\t\t\t'scenario',\n\t\t\t'work'\n\t\t];\n\n\t\tthis.loadYoutubeApiScript();\n\n\t\tthis.subscribe(\"UI.Tutor.Scenario:onYouTubeReady\", () => {\n\t\t\tthis.setVideoItems();\n\t\t});\n\t}\n\n\tloadYoutubeApiScript()\n\t{\n\t\tconst onYouTubeReadyEvent = function() {\n\t\t\tthis.emit(this.constructor.getFullEventName(\"onYouTubeReady\"), { scenario: this});\n\t\t}.bind(this);\n\n\t\tif (!window.YT)\n\t\t{\n\t\t\tlet isNeedCheckYT = true;\n\t\t\tconst tag = document.createElement('script');\n\t\t\ttag.src = \"https://www.youtube.com/iframe_api\";\n\t\t\tconst firstScriptTag = document.getElementsByTagName('script')[0];\n\t\t\tfirstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\n\n\t\t\tlet ytCheckerTimer = setInterval(function() {\n\t\t\t\tif (isNeedCheckYT)\n\t\t\t\t{\n\t\t\t\t\tif (window.YT && Type.isFunction(window.YT.Player))\n\t\t\t\t\t{\n\t\t\t\t\t\tclearInterval(ytCheckerTimer);\n\t\t\t\t\t\tonYouTubeReadyEvent();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, 200);\n\n\t\t\tsetTimeout(function() {\n\t\t\t\tclearInterval(ytCheckerTimer);\n\t\t\t\tisNeedCheckYT = false;\n\t\t\t}, 2000);\n\t\t}\n\t\telse {\n\t\t\tsetTimeout(function() {\n\t\t\t\tonYouTubeReadyEvent();\n\t\t\t}.bind(this), 100);\n\t\t}\n\n\t}\n\n\tsetOptions (options)\n\t{\n\t\tthis.fireCurrentStepEvent('onBeforeSetOptions', false);\n\t\toptions = Type.isPlainObject(options) ? options : {};\n\t\tlet currentStep = this.getCurrentStep();\n\n\t\t/** @var {Step[]} */\n\t\tthis.steps = [];\n\t\tif (Array.isArray(options.steps))\n\t\t{\n\t\t\toptions.steps.forEach(step => {\n\t\t\t\tthis.steps.push(new Step(step));\n\t\t\t});\n\t\t}\n\t\tif (currentStep instanceof Step)\n\t\t{\n\t\t\tlet stepInList = this.findStepById(currentStep.getId());\n\t\t\tif (stepInList)\n\t\t\t{\n\t\t\t\tcurrentStep = stepInList;\n\t\t\t}\n\t\t}\n\t\telse if (Type.isString(options.currentStepId) && options.currentStepId.length > 0)\n\t\t{\n\t\t\tlet stepInList = this.findStepById(options.currentStepId);\n\t\t\tif (stepInList)\n\t\t\t{\n\t\t\t\tcurrentStep = stepInList;\n\t\t\t\tif(options.currentStepIsActive === true)\n\t\t\t\t{\n\t\t\t\t\tcurrentStep.activate();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (!currentStep)\n\t\t{\n\t\t\tlet uncompletedStep = this.getFirstUncompletedStep();\n\t\t\tif (uncompletedStep)\n\t\t\t{\n\t\t\t\tcurrentStep = uncompletedStep;\n\t\t\t}\n\t\t}\n\t\tif (!currentStep && this.steps && this.steps[0])\n\t\t{\n\t\t\tcurrentStep = this.steps[0];\n\t\t}\n\t\tthis.setCurrentStep(currentStep);\n\n\t\tif (options)\n\t\t{\n\t\t\tthis.isLoading = false;\n\t\t}\n\n\t\tthis.title = options.title || '';\n\t\tthis.supportLink = options.supportLink || '';\n\t\tthis.isFinished = options.isFinished || false;\n\t\tthis.fireCurrentStepEvent('onAfterSetOptions', false);\n\t}\n\n\t/**\n\t * @param {Step} step\n\t */\n\tsetCurrentStep(step)\n\t{\n\t\tif (step instanceof Step)\n\t\t{\n\t\t\tthis.currentStep = step;\n\t\t\tlet steps = this.steps;\n\n\t\t\tif (Type.isArray(steps))\n\t\t\t{\n\t\t\t\tthis.currentStepIndex = steps.indexOf(step);\n\t\t\t}\n\t\t\tthis.fireCurrentStepEvent('onStartStep');\n\t\t}\n\t}\n\n\t/**\n\t * @public\n\t */\n\tstart(complexAnimation)\n\t{\n\t\tthis.emit(this.constructor.getFullEventName(\"onStart\"), { scenario: this});\n\n\t\tif (complexAnimation) // animate transition from collapsed popup to step popup\n\t\t{\n\t\t\tthis.complexAnimation = true;\n\t\t}\n\t\tthis.showPopup(this.getStepPopup());\n\t\tthis.toggleCompletedState();\n\t\tthis.toggleNavBtn();\n\t\tthis.setPopupData();\n\n\t\tif (this.isAddedSteps)\n\t\t{\n\t\t\tthis.hideFinalState();\n\t\t}\n\n\t\tif (!this.hasArrows)\n\t\t{\n\t\t\tthis.initArrows();\n\t\t}\n\n\t\tthis.complexAnimation = false;\n\t\tthis.fireCurrentStepEvent('onShowComplete');\n\t}\n\n\tfindStepById(stepId)\n\t{\n\t\tfor (let i = 0; i < this.steps.length; i++)\n\t\t{\n\t\t\tconst step = this.steps[i];\n\t\t\tif (step.getId() === stepId)\n\t\t\t{\n\t\t\t\treturn step;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tgetStepPopup()\n\t{\n\t\tconst clickOnCloseIcon = () => {\n\t\t\tthis.emit(this.constructor.getFullEventName(\"onClickOnCloseIcon\"), { scenario: this});\n\t\t};\n\n\t\tif (!this.stepPopup)\n\t\t{\n\t\t\tthis.stepPopup =\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"ui-tutor-popup ui-tutor-popup-step\">\n\t\t\t\t\t\t<div class=\"ui-tutor-popup-header\">\n\t\t\t\t\t\t\t<span class=\"ui-tutor-popup-header-icon\"></span>\n\t\t\t\t\t\t\t<span class=\"ui-tutor-popup-header-title\">\n\t\t\t\t\t\t\t\t<span class=\"ui-tutor-popup-header-counter\">\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('JS_UI_TUTOR_TITLE')}.\n\t\t\t\t\t\t\t\t\t${this.getCounterContainer()}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span class=\"ui-tutor-popup-header-subtitle\">${this.title}</span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t${this.getDeferLink()}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"ui-tutor-popup-content\">\n\t\t\t\t\t\t\t${this.getContentBlock()}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"ui-tutor-popup-step-wrap\">\n\t\t\t\t\t\t\t<div class=\"ui-tutor-popup-step-inner\">\n\t\t\t\t\t\t\t\t<div class=\"ui-tutor-popup-arrow-wrap\"></div>\n\t\t\t\t\t\t\t\t<div class=\"ui-tutor-popup-step-list-wrap\">\n\t\t\t\t\t\t\t\t\t${this.getStepBlock()}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"ui-tutor-popup-icon-close\" onclick=\"${clickOnCloseIcon.bind(this)}\"></div>\n\t\t\t\t\t\t<div class=\"ui-tutor-popup-icon-angle\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t\tthis.fireCurrentStepEvent('onCreateStepPopupNode');\n\t\t\tDom.append(this.stepPopup, document.body);\n\t\t\tthis.fireCurrentStepEvent('onAfterAppendStepPopupNode');\n\t\t}\n\n\t\treturn this.stepPopup;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tgetContentBlock()\n\t{\n\t\tif (!this.layout.contentBlock)\n\t\t{\n\t\t\tthis.layout.contentBlock =\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"ui-tutor-popup-content-block\">\n\t\t\t\t\t\t${this.getContentInner()}\n\t\t\t\t\t\t${this.getFooter()}\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.contentBlock;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tgetFooter()\n\t{\n\t\tif (!this.layout.footer)\n\t\t{\n\t\t\tthis.layout.footer =\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"ui-tutor-popup-footer\">\n\t\t\t\t\t\t${this.getNavigation()}\n\t\t\t\t\t\t${this.getBtnContainer()}\n\t\t\t\t\t\t${this.getSupportLink()}\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.footer;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tgetContentInner()\n\t{\n\t\tif (!this.layout.contentInner)\n\t\t{\n\t\t\tthis.layout.contentInner =\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"ui-tutor-popup-content-inner\">\n\t\t\t\t\t\t${this.getTitle()}\n\t\t\t\t\t\t${this.getDescription()}\n\t\t\t\t\t\t${this.getHelpBlock()}\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.contentInner;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tgetBtnContainer()\n\t{\n\t\tif (!this.layout.btnContainer)\n\t\t{\n\t\t\tthis.layout.btnContainer =\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"ui-tutor-popup-btn\">\n\t\t\t\t\t\t${this.getStartBtn()}\n\t\t\t\t\t\t${this.getRepeatBtn()}\n\t\t\t\t\t\t${this.getCompletedBtn()}\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.btnContainer;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tgetNavigation()\n\t{\n\t\tif (!this.layout.navigation)\n\t\t{\n\t\t\tthis.layout.navigation =\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"ui-tutor-popup-nav\"></div>\n\t\t\t\t`;\n\n\t\t\tthis.layout.backBtn =\n\t\t\t\tTag.render`\n\t\t\t\t\t<span class=\"ui-tutor-popup-nav-item ui-tutor-popup-nav-item-prev\" onclick=\"${this.clickOnBackBtn.bind(this)}\"></span>\n\t\t\t\t`;\n\n\t\t\tthis.layout.nextBtn =\n\t\t\t\tTag.render`\n\t\t\t\t\t<span class=\"ui-tutor-popup-nav-item ui-tutor-popup-nav-item-next\" onclick=\"${this.clickOnNextBtn.bind(this)}\"></span>\n\t\t\t\t`;\n\n\t\t\tDom.append(this.layout.backBtn, this.layout.navigation);\n\t\t\tDom.append(this.layout.nextBtn, this.layout.navigation);\n\t\t}\n\n\t\treturn this.layout.navigation;\n\t}\n\n\t/**\n\t * @private\n\t * @param {HTMLElement} node\n\t */\n\tsetInformer(node)\n\t{\n\t\tthis.setInformerCount(this.steps.length - this.getCompletedSteps());\n\t}\n\n\t/**\n\t * @public\n\t * @param {Number} num\n\t */\n\tsetInformerExternal(num)\n\t{\n\t\tthis.setInformerCount(num);\n\t}\n\n\t/**\n\t * @private\n\t */\n\tsetInformerCount(num)\n\t{\n\t\tManager.setCount(num);\n\t}\n\n\t/**\n\t * @public\n\t * @param {Event} event\n\t * @param {Boolean} complexAnimation\n\t */\n\tcloseStepPopup(event, complexAnimation)\n\t{\n\t\tif (!this.stepPopup)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (event)\n\t\t{\n\t\t\tevent.stopPropagation();\n\t\t}\n\t\tthis.fireCurrentStepEvent('onCloseStepPopup');\n\t\tif (complexAnimation) // animate transition from collapsed popup to step popup\n\t\t{\n\t\t\tthis.complexAnimation = true;\n\t\t}\n\t\tthis.fadeAnimation(this.getStepPopup());\n\t\tsetTimeout(function () {\n\t\t\tthis.hideNode(this.getStepPopup());\n\t\t}.bind(this), 310);\n\t\tthis.complexAnimation = false;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {number}\n\t */\n\tgetCompletedSteps()\n\t{\n\t\tlet total = 0;\n\t\tfor (let i = 0; i < this.steps.length; i += 1)\n\t\t{\n\t\t\tif (this.steps[i].isCompleted)\n\t\t\t{\n\t\t\t\ttotal += 1;\n\t\t\t}\n\t\t}\n\t\treturn total;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tsetStepCounter()\n\t{\n\t\tthis.getCounter().textContent = Loc.getMessage('JS_UI_TUTOR_COUNTER_NUMBER')\n\t\t\t.replace('#NUMBER#', this.steps.indexOf(this.getCurrentStep()) + 1)\n\t\t\t.replace('#NUMBER_TOTAL#', this.steps.length);\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tgetCounterContainer()\n\t{\n\t\tif (!this.layout.counterContainer)\n\t\t{\n\t\t\tthis.layout.counterContainer =\n\t\t\t\tTag.render`\n\t\t\t\t\t<span class=\"ui-tutor-popup-header-counter-step\">\n\t\t\t\t\t\t${this.getCounter()}\n\t\t\t\t\t</span>\n\t\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.counterContainer;\n\t}\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tgetCounter()\n\t{\n\t\tif (!this.layout.counter)\n\t\t{\n\t\t\tthis.layout.counter =\n\t\t\t\tTag.render`\n\t\t\t\t\t<span class=\"ui-tutor-popup-header-counter-number\"></span>\n\t\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.counter;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tgetDeferLink()\n\t{\n\t\tif (!this.layout.deferLink)\n\t\t{\n\t\t\tthis.layout.deferLink =\n\t\t\t\tTag.render`\n\t\t\t\t\t<span class=\"ui-tutor-popup-defer-link\">\n\t\t\t\t\t\t${Loc.getMessage('JS_UI_TUTOR_BTN_DEFER')}\n\t\t\t\t\t</span>\n\t\t\t\t`;\n\n\t\t\tconst deferMenu = new BX.PopupMenuWindow({\n\t\t\t\tangle: true,\n\t\t\t\toffsetLeft: 15,\n\t\t\t\tclassName: 'ui-tutor-popup-defer-menu',\n\t\t\t\tbindElement: this.layout.deferLink,\n\t\t\t\titems: [\n\t\t\t\t\t{ text: Loc.getMessage('JS_UI_TUTOR_DEFER_MENU_HOUR'),\n\t\t\t\t\t\tonclick: function() {\n\t\t\t\t\t\t\tthis.emit(this.constructor.getFullEventName(\"onDeferOneHour\"), { scenario: this});\n\t\t\t\t\t\t\tdeferMenu.close();\n\t\t\t\t\t\t}.bind(this)\n\t\t\t\t\t},\n\t\t\t\t\t{ text: Loc.getMessage('JS_UI_TUTOR_DEFER_MENU_TOMORROW'),\n\t\t\t\t\t\tonclick: function() {\n\t\t\t\t\t\t\tthis.emit(this.constructor.getFullEventName(\"onDeferTomorrow\"), { scenario: this});\n\t\t\t\t\t\t\tdeferMenu.close();\n\t\t\t\t\t\t}.bind(this)\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: Loc.getMessage('JS_UI_TUTOR_DEFER_MENU_WEEK'),\n\t\t\t\t\t\tonclick: function() {\n\t\t\t\t\t\t\tthis.emit(this.constructor.getFullEventName(\"onDeferWeek\"), { scenario: this});\n\t\t\t\t\t\t\tdeferMenu.close();\n\t\t\t\t\t\t}.bind(this)\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: Loc.getMessage('JS_UI_TUTOR_DEFER_MENU_FOREVER'),\n\t\t\t\t\t\tonclick: function() {\n\t\t\t\t\t\t\tthis.emit(this.constructor.getFullEventName(\"onDeferForever\"), { scenario: this});\n\t\t\t\t\t\t\tdeferMenu.close();\n\t\t\t\t\t\t}.bind(this)\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t});\n\n\t\t\tEvent.bind(this.layout.deferLink, \"click\", () => {\n\t\t\t\tdeferMenu.show();\n\t\t\t});\n\t\t}\n\n\t\treturn this.layout.deferLink;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tgetStartBtn()\n\t{\n\t\tif (!this.layout.startBtn)\n\t\t{\n\t\t\tthis.layout.startBtn =\n\t\t\t\tTag.render`\n\t\t\t\t\t<button class=\"ui-btn ui-btn-primary ui-btn-round\" onclick=\"${this.clickStartHandler.bind(this)}\">\n\t\t\t\t\t\t${Loc.getMessage('JS_UI_TUTOR_BTN_START')}\n\t\t\t\t\t</button>\n\t\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.startBtn;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tgetCompletedBtn()\n\t{\n\t\tif (!this.layout.completedBtn)\n\t\t{\n\t\t\tthis.layout.completedBtn =\n\t\t\t\tTag.render`\n\t\t\t\t\t<button class=\"ui-btn ui-btn-success ui-btn-round\" onclick=\"${this.showSuccessState.bind(this)}\">\n\t\t\t\t\t\t${Loc.getMessage('JS_UI_TUTOR_BTN_COMPLETED')}\n\t\t\t\t\t</button>\n\t\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.completedBtn;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tgetRepeatBtn()\n\t{\n\t\tif (!this.layout.repeatBtn)\n\t\t{\n\t\t\tthis.layout.repeatBtn =\n\t\t\t\tTag.render`\n\t\t\t\t\t<button class=\"ui-btn ui-btn-primary ui-btn-round\" onclick=\"${this.repeatStep.bind(this)}\">\n\t\t\t\t\t\t${Loc.getMessage('JS_UI_TUTOR_BTN_REPEAT')}\n\t\t\t\t\t</button>\n\t\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.repeatBtn;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tgetDeferBtn()\n\t{\n\t\tif (!this.layout.deferBtn)\n\t\t{\n\t\t\tthis.layout.deferBtn =\n\t\t\t\tTag.render`\n\t\t\t\t\t<button class=\"ui-btn ui-btn-link ui-btn-round\" onclick=\"${this.closeStepPopup.bind(this)}\">\n\t\t\t\t\t\t${Loc.getMessage('JS_UI_TUTOR_BTN_DEFER')}\n\t\t\t\t\t</button>\n\t\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.deferBtn;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tgetCompletedBLock()\n\t{\n\t\tif (!this.layout.completedBlock)\n\t\t{\n\t\t\tthis.layout.completedBlock =\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"ui-tutor-popup-completed\">\n\t\t\t\t\t\t<div class=\"ui-tutor-popup-completed-icon\"></div>\n\t\t\t\t\t\t<div class=\"ui-tutor-popup-completed-text\">${Loc.getMessage('JS_UI_TUTOR_STEP_COMPLETED')}</div>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.completedBlock;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tgetTitle()\n\t{\n\t\tif (!this.layout.title)\n\t\t{\n\t\t\tthis.layout.title =\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"ui-tutor-popup-step-title\"></div>\n\t\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.title;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tgetDescription()\n\t{\n\t\tif (!this.layout.description)\n\t\t{\n\t\t\tthis.layout.description =\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"ui-tutor-popup-step-decs\"></div>\n\t\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.description;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tgetSupportLink()\n\t{\n\t\tif (!this.layout.supportLink)\n\t\t{\n\t\t\tthis.layout.supportLink =\n\t\t\t\tTag.render`\n\t\t\t\t\t<a class=\"ui-tutor-popup-support-link\" onclick=\"${this.supportLinkHandler.bind(this)}\">\n\t\t\t\t\t\t${Loc.getMessage('JS_UI_TUTOR_BTN_SUPPORT')}\n\t\t\t\t\t</a>\n\t\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.supportLink;\n\t}\n\n\tsetInvisible()\n\t{\n\t\tthis.hideNode(this.getStepPopup());\n\t}\n\n\tsetVisible()\n\t{\n\t\tthis.showNode(this.getStepPopup());\n\t}\n\n\tsupportLinkHandler ()\n\t{\n\t\tthis.emit(this.constructor.getFullEventName('supportLinkClick'));\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tgetStepBlock()\n\t{\n\t\tif (!this.layout.stepBlock)\n\t\t{\n\t\t\tthis.layout.stepBlock =\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"ui-tutor-popup-step-list\"></div>\n\t\t\t\t`;\n\n\t\t\tthis.layout.stepItems = [];\n\n\t\t\tfor (let i = 0; i < this.steps.length; i += 1)\n\t\t\t{\n\t\t\t\tconst currentStepIndex =\n\t\t\t\t\tTag.render`\n\t\t\t\t\t\t<span class=\"ui-tutor-popup-step-item\" data-step=${i} onclick=\"${this.switchStep.bind(this)}\">\n\t\t\t\t\t\t\t<span class=\"ui-tutor-popup-step-item-number\">${i + 1}</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t`;\n\n\t\t\t\tthis.layout.stepItems.push(currentStepIndex);\n\t\t\t\tDom.append(currentStepIndex, this.layout.stepBlock);\n\t\t\t}\n\t\t\tthis.setStepItems();\n\t\t}\n\n\t\treturn this.layout.stepBlock;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tsetStepItems()\n\t{\n\t\tif (this.layout && this.layout.stepItems)\n\t\t{\n\t\t\tfor (let i = 0; i < this.steps.length; i += 1)\n\t\t\t{\n\t\t\t\tif (this.layout.stepItems[i])\n\t\t\t\t{\n\t\t\t\t\tDom.removeClass(this.layout.stepItems[i], 'ui-tutor-popup-step-item-current');\n\t\t\t\t\tif (i === this.currentStepIndex)\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.addClass(this.layout.stepItems[i], 'ui-tutor-popup-step-item-current');\n\t\t\t\t\t}\n\t\t\t\t\tif (this.steps[i].isCompleted)\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.addClass(this.layout.stepItems[i], 'ui-tutor-popup-step-item-completed');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tgetHelpBlock()\n\t{\n\t\tif (!this.layout.help)\n\t\t{\n\t\t\tthis.layout.help =\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"ui-tutor-popup-help\">\n\t\t\t\t\t\t${this.getHelpLink()}\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.help;\n\t}\n\n\tsetVideoItems()\n\t{\n\t\tfor (let i = 0; i < this.steps.length; i += 1)\n\t\t{\n\t\t\tconst currentVideo =\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"ui-tutor-popup-video\" data-step=${i}></div>\n\t\t\t\t`;\n\t\t\tDom.prepend(currentVideo, this.getHelpBlock());\n\n\t\t\tif (window.YT && Type.isObject(window.YT) && Type.isFunction(window.YT.Player) && this.steps[i].video !== null)\n\t\t\t{\n\t\t\t\tconst playerData = {\n\t\t\t\t\tvideoId: this.steps[i].video,\n\t\t\t\t\tevents: {\n\t\t\t\t\t\t'onReady': function(event) {\n\t\t\t\t\t\t\tevent.target.mute();\n\t\t\t\t\t\t\tevent.target.pauseVideo();\n\t\t\t\t\t\t\tevent.target.setPlaybackQuality('hd720');\n\n\t\t\t\t\t\t\tif (+event.target.getIframe().getAttribute('data-step') === this.currentStepIndex)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tDom.addClass(event.target.getIframe(), 'ui-tutor-popup-video-show');\n\t\t\t\t\t\t\t\tevent.target.playVideo();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}.bind(this)\n\t\t\t\t\t},\n\t\t\t\t\tplayerVars: {\n\t\t\t\t\t\tcc_load_policy: 1,\n\t\t\t\t\t\tcc_lang_pref: 'ru',\n\t\t\t\t\t\trel: 0\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t\tthis.fireCurrentStepEvent('onBeforeCreateVideo', true, {\n\t\t\t\t\tplayerData\n\t\t\t\t});\n\t\t\t\tthis.steps[i].videoObj = new YT.Player(currentVideo, playerData);\n\t\t\t\tthis.fireCurrentStepEvent('onAfterCreateVideo');\n\t\t\t}\n\t\t}\n\t}\n\n\tpauseCurrentVideo()\n\t{\n\t\tlet step = this.getCurrentStep();\n\n\t\tif (window.YT && step instanceof Step)\n\t\t{\n\t\t\tlet video = step.getVideoObj();\n\t\t\tif (Type.isObject(video) && video.pauseVideo)\n\t\t\t{\n\t\t\t\tvideo.pauseVideo();\n\t\t\t}\n\t\t}\n\t}\n\n\tplayCurrentVideo()\n\t{\n\t\tlet step = this.getCurrentStep();\n\n\t\tif (window.YT && step instanceof Step)\n\t\t{\n\t\t\tlet video = step.getVideoObj();\n\t\t\tif (Type.isObject(video) && video.playVideo)\n\t\t\t{\n\t\t\t\tvideo.playVideo();\n\t\t\t}\n\t\t}\n\t}\n\n\tgetHelpLink()\n\t{\n\t\tif (!this.layout.link)\n\t\t{\n\t\t\tthis.layout.link =\n\t\t\t\tTag.render`\n\t\t\t\t\t<span class=\"ui-tutor-popup-help-link\" onclick=\"${this.handleClickLinkHandler.bind(this)}\">\n\t\t\t\t\t\t<span class=\"ui-tutor-popup-help-link-text\">${Loc.getMessage('JS_UI_TUTOR_ARTICLE_HELP')}</span>\n\t\t\t\t\t</span>\n\t\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.link;\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandleClickLinkHandler()\n\t{\n\t\tthis.emit(this.constructor.getFullEventName('helpLinkClick'));\n\t}\n\n\t/**\n\t * @public\n\t * @param {HTMLElement} node\n\t */\n\tshowPopup(node)\n\t{\n\t\tthis.showAnimation(node);\n\t\tnode.style.display = 'block';\n\t}\n\n\t/**\n\t * @public\n\t * @param {HTMLElement} node\n\t */\n\tshowNode (node)\n\t{\n\t\tnode.style.display = 'block';\n\t}\n\n\t/**\n\t * @public\n\t * @param {HTMLElement} node\n\t */\n\thideNode (node)\n\t{\n\t\tnode.style.display = 'none';\n\t}\n\n\t/**\n\t * @public\n\t * @param {HTMLElement} node\n\t */\n\tremovePopup(node)\n\t{\n\t\tDom.remove(node);\n\t}\n\n\t/**\n\t * @private\n\t */\n\tclickOnNextBtn()\n\t{\n\t\tthis.fireCurrentStepEvent('onBeforeClickNavNextBtn');\n\t\tif (this.getCompletedSteps() === this.steps.length && !this.isFinished)\n\t\t{\n\t\t\tthis.isAddedSteps = false;\n\t\t\tDom.remove(this.getNewStepsSection());\n\t\t\tDom.removeClass(this.getFinishedBlock(), 'ui-tutor-popup-finished-new');\n\t\t\tthis.showFinalState();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.getCompletedSteps() === this.steps.length && this.currentStepIndex + 1 === this.steps.length)\n\t\t{\n\t\t\tthis.currentStepIndex = -1;\n\t\t}\n\n\t\tDom.removeClass(this.getStartBtn(), 'ui-btn-wait');\n\t\tthis.increaseCurrentIndex();\n\t\tthis.showStep();\n\t\tthis.toggleNavBtn();\n\t\tthis.fireCurrentStepEvent('onAfterClickNavNextBtn');\n\t}\n\n\tclickOnBackBtn()\n\t{\n\t\tthis.fireCurrentStepEvent('onBeforeClickNavBackBtn');\n\t\tthis.reduceCurrentIndex();\n\t\tthis.toggleNavBtn();\n\t\tthis.showStep();\n\t\tthis.fireCurrentStepEvent('onAfterClickNavBackBtn');\n\t}\n\n\ttoggleNavBtn()\n\t{\n\t\tDom.removeClass(this.layout.backBtn, 'ui-tutor-popup-nav-item-disabled');\n\t\tDom.removeClass(this.layout.nextBtn, 'ui-tutor-popup-nav-item-disabled');\n\n\t\tif (this.currentStepIndex === 0)\n\t\t{\n\t\t\tDom.addClass(this.layout.backBtn, 'ui-tutor-popup-nav-item-disabled');\n\t\t}\n\t\tif (this.currentStepIndex + 1 === this.steps.length)\n\t\t{\n\t\t\tDom.addClass(this.layout.nextBtn, 'ui-tutor-popup-nav-item-disabled');\n\t\t}\n\t}\n\n\tshowStep()\n\t{\n\t\t// when last step is completed, but some steps are not\n\t\tif (this.clickOnCompletedBtn && this.currentStepIndex === this.steps.length)\n\t\t{\n\t\t\tlet nextUncompletedStep = this.getFirstUncompletedStep();\n\t\t\tif (nextUncompletedStep)\n\t\t\t{\n\t\t\t\tthis.setCurrentStep(nextUncompletedStep);\n\t\t\t}\n\t\t}\n\n\t\tthis.scrollToStep();\n\t\tthis.toggleCompletedState();\n\t\tthis.setPopupData();\n\n\t\tthis.clickOnCompletedBtn = false;\n\t\tthis.fireCurrentStepEvent('onAfterShowStep');\n\t}\n\n\n\t/**\n\t * @private\n\t */\n\tswitchStep()\n\t{\n\t\tthis.fireCurrentStepEvent('onBeforeSwitchStep');\n\t\tthis.setCurrentStep(this.steps[+window.event.target.getAttribute('data-step')]);\n\t\tthis.fireCurrentStepEvent('onAfterSwitchStep');\n\n\t\tif (this.layout.finishedBlock)\n\t\t{\n\t\t\tthis.hideFinalState();\n\t\t}\n\n\t\tthis.showStep();\n\t\tthis.toggleNavBtn();\n\t\tthis.fireCurrentStepEvent('onEndSwitchStep');\n\t}\n\n\t/**\n\t * @private\n\t */\n\tgetFirstUncompletedStep()\n\t{\n\t\tfor (let i = 0; i < this.steps.length; i += 1)\n\t\t{\n\t\t\tif (!this.steps[i].isCompleted)\n\t\t\t{\n\t\t\t\treturn this.steps[i];\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * @private\n\t */\n\ttoggleCompletedState()\n\t{\n\t\tconst currentStep = this.getCurrentStep();\n\t\tif (currentStep)\n\t\t{\n\t\t\tif (currentStep.getCompleted())\n\t\t\t{\n\t\t\t\tthis.showNode(this.getRepeatBtn());\n\t\t\t\tthis.hideNode(this.getStartBtn());\n\t\t\t\tthis.hideNode(this.getCompletedBtn());\n\t\t\t}\n\t\t\telse if (currentStep.isActive)\n\t\t\t{\n\t\t\t\tthis.showNode(this.getCompletedBtn());\n\t\t\t\tthis.hideNode(this.getStartBtn());\n\t\t\t\tthis.showNode(this.getRepeatBtn());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.showNode(this.getStartBtn());\n\t\t\t\tthis.hideNode(this.getCompletedBtn());\n\t\t\t\tthis.hideNode(this.getRepeatBtn());\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\tsetPopupData()\n\t{\n\t\tthis.fireCurrentStepEvent('onBeforeSetPopupData');\n\t\tconst currentStep = this.getCurrentStep();\n\t\tif (currentStep)\n\t\t{\n\t\t\tthis.getTitle().innerHTML = currentStep.getTitle();\n\t\t\tthis.getDescription().innerHTML = currentStep.getDescription();\n\t\t\tManager.getCollapseTitle().innerHTML = currentStep.getTitle();\n\n\t\t\tif (this.getCurrentStep().getVideo() && window.YT)\n\t\t\t{\n\t\t\t\tthis.setCurrentVideo();\n\t\t\t}\n\n\t\t\tthis.setStepCounter();\n\t\t\tthis.setStepItems();\n\t\t}\n\t\tthis.fireCurrentStepEvent('onAfterSetPopupData');\n\t}\n\n\tsetCurrentVideo()\n\t{\n\t\tthis.fireCurrentStepEvent('onSetCurrentVideo');\n\t\tfor (let i = 0; i < this.steps.length; i += 1)\n\t\t{\n\t\t\tlet video = this.steps[i].getVideoObj();\n\t\t\tif (window.YT && i === this.currentStepIndex && video && video.playVideo)\n\t\t\t{\n\t\t\t\tDom.addClass(video.getIframe(), 'ui-tutor-popup-video-show');\n\t\t\t\tvideo.playVideo();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (video) {\n\t\t\t\t\tDom.removeClass(video.getIframe(), 'ui-tutor-popup-video-show');\n\n\t\t\t\t\tif (video.pauseVideo)\n\t\t\t\t\t{\n\t\t\t\t\t\tvideo.pauseVideo();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @public\n\t * @returns {Step}\n\t */\n\tgetCurrentStep()\n\t{\n\t\treturn this.currentStep;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tincreaseCurrentIndex()\n\t{\n\t\tif (this.currentStepIndex === this.steps.length)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.currentStepIndex += 1;\n\t\tthis.setCurrentStep(this.steps[this.currentStepIndex]);\n\t}\n\n\t/**\n\t * @private\n\t */\n\treduceCurrentIndex()\n\t{\n\t\tif (this.currentStepIndex === 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.currentStepIndex -= 1;\n\t\tthis.setCurrentStep(this.steps[this.currentStepIndex]);\n\t}\n\n\t/**\n\t * @private\n\t */\n\tshowCollapseBlock(step, withGuide)\n\t{\n\t\twithGuide = withGuide !== false;\n\t\tthis.closeStepPopup(null, true);\n\t\tManager.showCollapsedBlock(step, withGuide);\n\t}\n\n\t/**\n\t * @private\n\t */\n\tminimize()\n\t{\n\t\tthis.pauseCurrentVideo();\n\t\tthis.fireCurrentStepEvent('onMinimize');\n\t\tthis.showCollapseBlock(this.getCurrentStep(), false);\n\t}\n\n\trepeatStep()\n\t{\n\t\tthis.followLink();\n\t}\n\n\tclickStartHandler()\n\t{\n\t\tthis.followLink();\n\t}\n\t/**\n\t * @private\n\t */\n\tfollowLink(step)\n\t{\n\t\tlet currentStep = this.getCurrentStep();\n\t\tif (step instanceof Step)\n\t\t{\n\t\t\tcurrentStep = step;\n\t\t}\n\t\tthis.pauseCurrentVideo();\n\n\t\tthis.setActiveStep(currentStep);\n\t\tManager.checkFollowLink(currentStep, this);\n\t}\n\n\tsetActiveStep(step)\n\t{\n\t\tthis.fireCurrentStepEvent('onBeforeSetActiveStep');\n\t\tif (this.currentActiveStep instanceof Step)\n\t\t{\n\t\t\tthis.currentActiveStep.deactivate();\n\t\t}\n\t\tstep.activate();\n\t\tthis.currentActiveStep = step;\n\t\tthis.fireCurrentStepEvent('onAfterSetActiveStep');\n\t}\n\n\t/**\n\t * @private\n\t */\n\tshowSuccessState()\n\t{\n\t\tconst currentStep = this.getCurrentStep();\n\t\tthis.clickOnCompletedBtn = true;\n\t\tcurrentStep.isCompleted = true;\n\t\tthis.fireCurrentStepEvent('onFinishStep');\n\n\t\tif (currentStep.getCompleted())\n\t\t{\n\t\t\tDom.addClass(this.layout.stepItems[this.currentStepIndex], 'ui-tutor-popup-step-item-completed');\n\t\t}\n\t\tDom.addClass(this.getContentBlock(), 'ui-tutor-popup-content-block-animate');\n\n\t\tsetTimeout(function () {\n\t\t\tDom.replace(this.getHelpBlock(), this.getCompletedBLock());\n\t\t\tthis.getFooter().style.display = \"none\";\n\t\t\tthis.getDescription().style.display = \"none\";\n\t\t\tthis.getTitle().style.display = \"none\";\n\t\t}.bind(this), 300);\n\n\t\tsetTimeout(function () {\n\t\t\tDom.addClass(this.getCompletedBLock(), 'ui-tutor-popup-completed-animate')\n\t\t}.bind(this), 800);\n\n\t\tsetTimeout(function () {\n\t\t\tDom.replace(this.getCompletedBLock(), this.getHelpBlock());\n\t\t\tthis.getTitle().style.display = \"block\";\n\t\t\tthis.getDescription().style.display = \"block\";\n\t\t\tthis.getFooter().style.display = \"flex\";\n\n\t\t\tthis.clickOnNextBtn();\n\t\t}.bind(this), 1500);\n\n\t\tsetTimeout(function () {\n\t\t\tDom.removeClass(this.getCompletedBLock(), 'ui-tutor-popup-completed-animate');\n\t\t\tDom.removeClass(this.getContentBlock(), 'ui-tutor-popup-content-block-animate');\n\n\t\t\tlet counter = this.stepPopup.querySelector(\".ui-tutor-popup-header-counter-number\");\n\t\t\tcounter.innerHTML = Loc.getMessage('JS_UI_TUTOR_COUNTER_NUMBER')\n\t\t\t\t.replace('#NUMBER#', this.steps.indexOf(this.getCurrentStep()) + 1)\n\t\t\t\t.replace('#NUMBER_TOTAL#', this.steps.length);\n\t\t\tthis.fireCurrentStepEvent('onAfterShowSuccessState');\n\t\t}.bind(this), 1700);\n\n\t}\n\n\tfireCurrentStepEvent(eventName, fireStepEvent, extra)\n\t{\n\t\tfireStepEvent = fireStepEvent !== false;\n\t\tconst currentStep = this.getCurrentStep();\n\n\t\tconst data = {\n\t\t\tstep : currentStep,\n\t\t\tscenario: this\n\t\t};\n\t\tif (extra)\n\t\t{\n\t\t\tdata.extra = extra;\n\t\t}\n\t\tif (currentStep && fireStepEvent)\n\t\t{\n\t\t\tcurrentStep.emit(currentStep.constructor.getFullEventName(eventName), data);\n\t\t}\n\t\tthis.emit(this.constructor.getFullEventName(eventName), data);\n\t}\n\n\t/**\n\t * @private\n\t */\n\tshowFinalState()\n\t{\n\t\tthis.fireCurrentStepEvent('onFinalState');\n\n\t\tif (this.layout.stepItems)\n\t\t{\n\t\t\tDom.removeClass(this.layout.stepItems[this.currentStepIndex], 'ui-tutor-popup-step-item-current');\n\t\t}\n\n\t\tDom.append(this.getFinishedBlock(), this.getContentInner());\n\t\tDom.replace(this.getStartBtn(), this.getFinishedNotice());\n\t\tDom.remove(this.getCompletedBtn());\n\n\t\tDom.remove(this.getSupportLink());\n\t\tDom.remove(this.getNavigation());\n\t\tDom.remove(this.getHelpBlock());\n\n\t\tDom.remove(this.getRepeatBtn());\n\t\tDom.remove(this.getTitle());\n\t\tDom.remove(this.getDescription());\n\t\tDom.remove(this.getDeferLink());\n\n\t\tthis.isFinished = true;\n\t\tthis.fireCurrentStepEvent('onAfterFinalState');\n\t}\n\n\t/**\n\t * @private\n\t */\n\thideFinalState()\n\t{\n\t\tthis.fireCurrentStepEvent('onBeforeHideFinalState');\n\t\tif (this.getCurrentStep().getCompleted())\n\t\t{\n\t\t\tDom.replace(this.getFinishedNotice(), this.getRepeatBtn());\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.replace(this.getFinishedNotice(), this.getStartBtn());\n\t\t}\n\n\t\tDom.replace(this.getFinishedBlock(), this.getHelpBlock());\n\t\tDom.append(this.getSupportLink(), this.getFooter());\n\t\tDom.prepend(this.getNavigation(), this.getFooter());\n\t\tDom.prepend(this.getDescription(), this.getContentInner());\n\t\tDom.prepend(this.getTitle(), this.getContentInner());\n\n\t\tif (this.layout.deferBtn)\n\t\t{\n\t\t\tDom.remove(this.getDeferBtn());\n\t\t\tDom.prepend(this.getStartBtn(), this.getBtnContainer());\n\t\t}\n\n\t\tconst header = this.getStepPopup().querySelector('.ui-tutor-popup-header');\n\t\tDom.append(this.getDeferLink(), header);\n\t\tthis.fireCurrentStepEvent('onAfterHideFinalState');\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tgetFinishedBlock()\n\t{\n\t\tif (!this.layout.finishedBlock)\n\t\t{\n\t\t\tthis.layout.finishedBlock =\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"ui-tutor-popup-finished\">\n\t\t\t\t\t\t<div class=\"ui-tutor-popup-finished-title\">${Loc.getMessage('JS_UI_TUTOR_FINAL_CONGRATULATIONS')}</div>\n\t\t\t\t\t\t<div class=\"ui-tutor-popup-finished-icon\"></div>\n\t\t\t\t\t\t<div class=\"ui-tutor-popup-finished-text\">${Loc.getMessage('JS_UI_TUTOR_FINAL_TEXT')}</div>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.finishedBlock;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tgetFinishedNotice()\n\t{\n\t\tif (!this.layout.finishedNotice)\n\t\t{\n\t\t\tthis.layout.finishedNotice =\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"ui-tutor-popup-finished-notice\">${Loc.getMessage('JS_UI_TUTOR_FINAL_NOTICE')}</div>\n\t\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.finishedNotice;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tgetNewStepsSection()\n\t{\n\t\tif (!this.layout.newStepsSection)\n\t\t{\n\t\t\tthis.layout.newStepsSection =\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"ui-tutor-popup-new-text\">${Loc.getMessage('JS_UI_TUTOR_STEP_NEW')}</div>\n\t\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.newStepsSection;\n\t}\n\n\t/**\n\t * @public\n\t */\n\tshowNewSteps()\n\t{\n\t\tDom.addClass(this.getFinishedBlock(), 'ui-tutor-popup-finished-new');\n\t\tthis.showPopup(this.getStepPopup());\n\t\tthis.showFinalState();\n\n\t\tDom.append(this.getNewStepsSection(), this.getFinishedBlock());\n\t\tDom.replace(this.getFinishedNotice(), Manager.getBeginBtn());\n\t\tDom.append(this.getDeferBtn(), this.getBtnContainer());\n\n\t\tthis.setStepCounter();\n\t\tthis.initArrows();\n\t\tthis.scrollToStep();\n\n\t\tthis.isAddedSteps = true;\n\t\tthis.isFinished = false;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tinitArrows()\n\t{\n\t\tthis.stepListWrap = document.querySelector('.ui-tutor-popup-step-list-wrap');\n\t\tthis.arrowWrap = document.querySelector('.ui-tutor-popup-arrow-wrap');\n\n\t\tif (this.stepListWrap && this.stepListWrap.scrollWidth > this.stepListWrap.offsetWidth)\n\t\t{\n\t\t\tDom.append(this.getPrevArrow(), this.arrowWrap);\n\t\t\tDom.append(this.getNextArrow(), this.arrowWrap);\n\n\t\t\tthis.stepListWrap.addEventListener('scroll', this.toggleArrows.bind(this));\n\n\t\t\tthis.prevArrow.addEventListener('mouseenter', this.scrollToLeft.bind(this));\n\t\t\tthis.prevArrow.addEventListener('mouseleave', this.stopAutoScroll.bind(this));\n\t\t\tthis.nextArrow.addEventListener('mouseenter', this.scrollToRight.bind(this));\n\t\t\tthis.nextArrow.addEventListener('mouseleave', this.stopAutoScroll.bind(this));\n\n\t\t\tthis.toggleNextArrow();\n\t\t\tthis.getStepBlock().classList.add(\"ui-tutor-popup-step-list-wide\");\n\n\t\t\tthis.hasArrows = true;\n\t\t}\n\t}\n\n\tgetPrevArrow()\n\t{\n\t\tif (!this.prevArrow)\n\t\t{\n\t\t\tthis.prevArrow =\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"ui-tutor-popup-arrow ui-tutor-popup-arrow-prev\"></div>\n\t\t\t\t`;\n\t\t}\n\n\t\treturn this.prevArrow;\n\t}\n\n\tgetNextArrow()\n\t{\n\t\tif (!this.nextArrow)\n\t\t{\n\t\t\tthis.nextArrow =\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"ui-tutor-popup-arrow ui-tutor-popup-arrow-next\"></div>\n\t\t\t\t`;\n\t\t}\n\n\t\treturn this.nextArrow;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tscrollToLeft()\n\t{\n\t\tthis.arrowTimer = setInterval(function() {\n\t\t\tthis.stepListWrap.scrollLeft -= 5;\n\t\t}.bind(this), 20);\n\t}\n\n\t/**\n\t * @private\n\t */\n\tscrollToRight()\n\t{\n\t\tthis.arrowTimer = setInterval(function() {\n\t\t\tthis.stepListWrap.scrollLeft += 5;\n\t\t}.bind(this), 20);\n\t}\n\n\t/**\n\t * @private\n\t */\n\tstopAutoScroll()\n\t{\n\t\tclearInterval(this.arrowTimer);\n\t}\n\n\t/**\n\t * @private\n\t */\n\ttoggleArrows()\n\t{\n\t\tthis.togglePrevArrow();\n\t\tthis.toggleNextArrow();\n\t}\n\n\t/**\n\t * @private\n\t */\n\ttoggleNextArrow()\n\t{\n\t\tif (this.stepListWrap.scrollWidth > this.stepListWrap.offsetWidth\n\t\t\t&& (this.stepListWrap.offsetWidth + this.stepListWrap.scrollLeft) < this.stepListWrap.scrollWidth)\n\t\t{\n\t\t\tDom.addClass(this.nextArrow, 'ui-tutor-popup-arrow-show');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(this.nextArrow, 'ui-tutor-popup-arrow-show');\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\ttogglePrevArrow()\n\t{\n\t\tif (this.stepListWrap.scrollLeft > 0)\n\t\t{\n\t\t\tDom.addClass(this.prevArrow, 'ui-tutor-popup-arrow-show');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(this.prevArrow, 'ui-tutor-popup-arrow-show');\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\tshowAnimation(popup)\n\t{\n\t\tDom.removeClass(popup, 'ui-tutor-popup-hide-complex');\n\t\tDom.removeClass(popup, 'ui-tutor-popup-hide');\n\n\t\tif (this.complexAnimation)\n\t\t{\n\t\t\tDom.addClass(popup, 'ui-tutor-popup-show-complex');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.addClass(popup, 'ui-tutor-popup-show');\n\t\t}\n\n\t}\n\n\t/**\n\t * @private\n\t */\n\tfadeAnimation(popup)\n\t{\n\t\tDom.removeClass(popup, 'ui-tutor-popup-show-complex');\n\t\tDom.removeClass(popup, 'ui-tutor-popup-show');\n\n\t\tif (this.complexAnimation)\n\t\t{\n\t\t\tDom.addClass(popup, 'ui-tutor-popup-hide-complex');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.addClass(popup, 'ui-tutor-popup-hide');\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\tscrollToStep()\n\t{\n\t\tlet posList = null;\n\t\tlet posStep = null;\n\t\tif (this.stepListWrap)\n\t\t{\n\t\t\tposList = Dom.getPosition(this.stepListWrap);\n\t\t\tposStep = Dom.getPosition(this.stepListWrap.querySelector('[data-step=\"' + this.currentStepIndex + '\"]'));\n\t\t}\n\t\tconst offset = 7; // padding 2px and margin 5px\n\n\t\tif (!Type.isNull(posStep) && posStep.left + posStep.width > posList.left + posList.width )\n\t\t{\n\t\t\tthis.stepListWrap.scrollLeft += posStep.left - (posList.left + posList.width) + posStep.width + offset;\n\t\t}\n\n\t\tif (!Type.isNull(posStep) && posStep.left < posList.left)\n\t\t{\n\t\t\tthis.stepListWrap.scrollLeft -= posList.left - posStep.left + offset;\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\tstatic getFullEventName(shortName)\n\t{\n\t\treturn \"UI.Tutor.Scenario:\" + shortName;\n\t}\n\n\tstatic getInstance()\n\t{\n\t\treturn Manager.getScenarioInstance();\n\t}\n\n\tstatic init(options)\n\t{\n\t\treturn Manager.initScenario(options);\n\t}\n}"],"names":["Step","options","Type","isPlainObject","id","title","description","url","isCompleted","video","helpLink","highlight","isActive","isShownForSlider","initOptions","videoObj","shortName","Event","EventEmitter","Manager","tutorialData","eventService","lastCheckTime","domain","instance","scenarioInstance","getInstance","eventName","emit","BX","onCustomEvent","setOptions","getScenarioInstance","Scenario","animation","getImButton","document","getElementById","getRootImButton","layout","imButton","buttonWrapper","buttonInner","Tag","render","Dom","addClass","append","bind","getFullEventName","text","smallPopupText","getSmallPopup","style","display","hasClass","removeClass","setTimeout","remove","fireEvent","showSmallPopup","hideSmallPopup","clickWelcomePopupHandler","smallPopup","Loc","getMessage","body","window","event","startTitle","startText","getStartPopup","startPopup","getBeginBtn","getDeferBtn","beginBtn","deferBtn","informer","informerParentNode","isCollapsedShow","getCollapseBlock","num","removeInformer","isInformerShow","getInformer","textContent","step","withGuide","showAfterAnimation","collapsedStep","collapsedBlock","showFunction","call","getCollapseTitle","innerHTML","getTitle","showGuide","checkButtonsState","hideNode","showNode","getCompleted","activeGuide","getRepeatBtn","getCompletedBtn","getStartBtn","isShowRepeatWithCompleted","Guide","simpleMode","steps","getHighlightOptions","subscribe","finishGuide","start","getPopup","closeIcon","close","collapseBlock","clickCollapseBlockHandler","startBtn","stopPropagation","repeatBtn","completedBtn","collapseTitle","closeCollapseEntity","loader","Loader","target","size","show","destroy","collapseLoader","node","scenario","location","pathname","getUrl","beforeEvent","fireCurrentStepEvent","showCollapseBlock","activate","showCollapsedBlock","stepPopup","arrowTimer","guide","arrowWrap","prevArrow","nextArrow","currentStepIndex","currentStep","isAddedSteps","hasArrows","isLoading","btn","stepBlock","progress","counter","counterContainer","collapseDescription","content","contentInner","contentBlock","nextBtn","help","completedBlock","finishedBlock","supportLink","sections","loadYoutubeApiScript","setVideoItems","onYouTubeReadyEvent","constructor","YT","isNeedCheckYT","tag","createElement","src","firstScriptTag","getElementsByTagName","parentNode","insertBefore","ytCheckerTimer","setInterval","isFunction","Player","clearInterval","getCurrentStep","Array","isArray","forEach","push","stepInList","findStepById","getId","isString","currentStepId","length","currentStepIsActive","uncompletedStep","getFirstUncompletedStep","setCurrentStep","isFinished","indexOf","complexAnimation","showPopup","getStepPopup","toggleCompletedState","toggleNavBtn","setPopupData","hideFinalState","initArrows","stepId","i","clickOnCloseIcon","getCounterContainer","getDeferLink","getContentBlock","getStepBlock","getContentInner","getFooter","footer","getNavigation","getBtnContainer","getSupportLink","getDescription","getHelpBlock","btnContainer","navigation","backBtn","clickOnBackBtn","clickOnNextBtn","setInformerCount","getCompletedSteps","setCount","fadeAnimation","total","getCounter","replace","deferLink","deferMenu","PopupMenuWindow","angle","offsetLeft","className","bindElement","items","onclick","clickStartHandler","showSuccessState","repeatStep","closeStepPopup","supportLinkHandler","stepItems","switchStep","setStepItems","getHelpLink","currentVideo","prepend","isObject","playerData","videoId","events","mute","pauseVideo","setPlaybackQuality","getIframe","getAttribute","playVideo","playerVars","cc_load_policy","cc_lang_pref","rel","getVideoObj","link","handleClickLinkHandler","showAnimation","getNewStepsSection","getFinishedBlock","showFinalState","increaseCurrentIndex","showStep","reduceCurrentIndex","clickOnCompletedBtn","nextUncompletedStep","scrollToStep","getVideo","setCurrentVideo","setStepCounter","pauseCurrentVideo","followLink","setActiveStep","checkFollowLink","currentActiveStep","deactivate","getCompletedBLock","querySelector","fireStepEvent","extra","data","getFinishedNotice","header","finishedNotice","newStepsSection","stepListWrap","scrollWidth","offsetWidth","getPrevArrow","getNextArrow","addEventListener","toggleArrows","scrollToLeft","stopAutoScroll","scrollToRight","toggleNextArrow","classList","add","scrollLeft","togglePrevArrow","popup","posList","posStep","getPosition","offset","isNull","left","width","initScenario"],"mappings":"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"}